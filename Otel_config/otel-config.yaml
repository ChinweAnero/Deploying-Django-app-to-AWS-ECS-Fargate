extensions:
  sigv4auth:
    region: eu-west-2
    service: aps

receivers:
  prometheus:
    config:
      scrape_configs:
        - job_name: "myapp"
          static_configs:
            - targets: ["localhost:8080"]

exporters:
  awsemf:
    region: eu-west-2
    authentication:
      authenticator: sigv4auth

  prometheusremotewrite:
    endpoint: "https://aps-workspaces.eu-west-2.amazonaws.com/workspaces/ws-94d077b9-e437-41f7-81ab-120e6ed9fd16/api/v1/remote_write"
    authentication:
      authenticator: sigv4auth

service:
  extensions: [sigv4auth]
  pipelines:
    metrics:
      receivers: [prometheus]
      exporters: [awsemf, prometheusremotewrite]
